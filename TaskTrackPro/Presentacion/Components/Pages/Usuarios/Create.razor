@page "/usuarios/crear"

@using BusinessLogic
@inject NavigationManager NavigationManager
@inject DB BaseDeDatos

<h1>Crear Usuario</h1>

@if (!string.IsNullOrEmpty(mensajeError))
{
    <div class="alert alert-danger">@mensajeError</div>
}

<div class="form-group">
    <label>Email</label>
    <input type="email" class="form-control" @bind="email" />
</div>

<div class="form-group">
    <label>Nombre</label>
    <input type="text" class="form-control" @bind="nombre" />
</div>

<div class="form-group">
    <label>Apellido</label>
    <input type="text" class="form-control" @bind="apellido" />
</div>

<div class="form-group">
    <label>Contraseña</label>
    <input type="password" class="form-control" @bind="pwd" />
</div>

<div class="form-group">
    <label>Fecha de nacimiento</label>
    <input type="date" class="form-control" @bind="fechaNacimiento" />
</div>

<button class="btn btn-primary" @onclick="GuardarUsuario">Crear</button>
<a class="btn btn-secondary" href="/usuarios">Cancelar</a>

@code {
    private string email = "";
    private string nombre = "";
    private string apellido = "";
    private string pwd = "";
    private DateTime fechaNacimiento = DateTime.Today;

    private string mensajeError = "";

    private void GuardarUsuario()
    {
        Console.Write("ENTRO");
        mensajeError = "";
       
            var nuevo = new Usuario(email, nombre, apellido, pwd, fechaNacimiento);
            BaseDeDatos.agregarUsuario(nuevo);
            NavigationManager.NavigateTo("/usuarios");
        }
       
    }

